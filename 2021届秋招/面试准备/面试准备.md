旷视面试准备
=====================


知乎帖子
-----------------

整个面试一个小时，开始会让你自我介绍

1.介绍项目相关，一般是和你所面试的课题组或CV方向相关的项目经历会重点提问，询问项目的应用场景以及你所负责的部分（原理必须搞清 具体训练过程 在调参中你所用到的trick 数据预处理方面）

2.softmax的数学公式 包括i是什么 j是什么 exp过大时怎么处理，输入什么经过softmax层后得到什么输出（笔者对于这个输入输出有些模糊，当时只答出了输入一个vector得到一个和为1的向量，但感觉说的过于简单）

[知乎softmax讲解](https://www.zhihu.com/question/23765351)

3.卷积向前传播过程 数学计算 详细到权重

这个问的是特别特别细，笔者面试前自以为自己对CNN传播过程了解很透彻，但现场还是被问住了，建议参考cs231n反向传播一章，讲解很清楚。

4.梯度弥散问题的原因 解决办法（解决办法笔者只说出了选择更好的激活函数，比如relu leakrelu 但其实解决办法有很多 包括梯度剪切、正则 batchnorm 残差结构 LSTM等）

5.sigmoid函数及其相关性质，为什么导数的最大值为0.25

>个人解释:sigmoid函数非线性,如果不用该函数,那么深度神经网络基本退化成了一个MLP多层感知机,全是线性运算,对与高维度,非线性的分类不能很好的去拟合.失去了神经网络的意义.

>此处知识点,对比下相关的激活函数.sigmoid,relu,tanh
>--------------------------
> $$sigmiod(x)=1/(1+e^{-x})$$
>sigmoid函数的导数最大值为0.25,因为求导书之后为$m/((1+m)^2)$m取值范围为0到1,此函数的极值为0.25,在m=1取到,但是sigmoid函数有三个缺点:
> * 梯度容易消失
> * 梯度只能正向或者反向更新,收敛速度慢
> * 幂运算耗时
> 
> tanh函数(取值范围-1到1,解决了只能正向和反向传播问题,但是还是会梯度消失,并且幂运算慢
> $$ tanhx=(e^x-e^{-x})/((e^x+e^{-x}))$$
> relu函数
> $$relu=max(0,x)$$
> 解决梯度消失问题,收敛快,计算块,网络稀疏,缓解过拟合.
> 容易出现问题,网络参数初始化不好的话,导致部分参数永远不会更新.

6.深度学习初始化权重的问题
>首先如何初始化：
> * w全部初始化为0（不行，因为每一层输出一样，迭代一定次数基本上就不起作用了）
> * w随机初始化(最常用的办法，w初始化到一个较小范围，防止输出过大，sigmoid之后梯度太小，无法继续训练)
> * Xavier initialization输入输出尽量同分布，对于tanh激活较为友好，对relu不好
> * He initialization(何凯明提出)
> 
>初始化后特别重要
>
7.卷积运算的数学意义 物理意义
>信号与系统：

8.最后一道数据结构题，字符的全排列

总的来说，这次面试还是意识到自己的菜比，编程能力 姿势水平亟待提高，旷视还是一家很有科技氛围的公司，面试前在前台等待的时候碰巧遇见了孙剑大佬，也算是不虚此行吧。希望下次有机会再去旷视面试的时候能顺利拿到offer。



预备介绍的项目和比赛（自问自答）：等待面试、、、、
1. 项目整体介绍：
   基于深度学习的遥感图像的半自动标注样本库。
   采用deeplabV3整体架构，resnet50（修改最后一个residu block中间三层的dilation rate，后面采用resnext50做一个更强的特征提取）（输出是b×2048*(w/16)*(h/16)的特征图）后面链接一个ASPP（空洞卷积空间池化特征金字塔）结构得到b*1280×w/16*h/16然后加上一个全局池化层和一个上采样构成。

2. 项目遇到那些bad case，怎么解决的：
   网络最初的方案有问题，通过和对方协调更改网络来进行。
   在分割的过程中，部分样本识别混乱，或者说识别不出来的问题，考虑采用更深的网络去拟合现有的数据。
3. 扮演什么角色，怎么分配任务和工作：
   实习过程中的负责人，工作安排如下
   首先是和54所的人确定项目的方案，进度以及定期开会汇报。还有和老板的汇报。
   任务分配：总共4个人，其中一个中途去北京了，分割组，图像比对组，ui界面组。把握整体的进度。其中分割组的从数据标注到最后得到模型，预测都是我在负责完成（数据标注主要有学校的师弟），然后图像比对组，我主要负责查找资料为图像比对组的工作提供idea，他工作较少会帮我写点小的脚本之类的。ui组我主要是负责把控进度，我们以2个星期一个节点，我负责安排到ui组的同学具体每次节点之后具体要实现哪些功能。在前两周内实现初步界面，后面实现标注需要的一些功能，缩放，修改标注边界等。
4. C++内容:
   这一块着实需要提高。目前没想好怎么回答。
5. 数据怎么清洗的。
   
   主要是利用训练好的模型对训练集的测试，来分析测试结果。列出混淆矩阵，针对不在对角线上，占比较多的类别之间取检查数据标注情况，单独列出包含此类别的一些label图和原图的对比，检查是数据问题还是模型问题，如果是数据的话，那么重新修订标注规范。比如，我们在实验中遇到一个很大的问题，是遥感图像中的水和植被的识别，在训练过程中发现这两类有明显的混淆和错分情况，因为在标注的时候，水和植被颜色都较深，难以区分，那么后面我们根据遥感图像的特征，就是利用近红外信息，提取出ndvi指数的图像，红色是植被，黑色是水体，修改了数据集之后，水体和植被检测精度和iou明显提升。40，60————》60,90

6. 怎么解决数据不平衡的问题。
   我们数据的标注情况不是特别理想，数据类别不均衡
   1. 我们采用了随机裁剪中根据mask控制裁剪区域，尽可能多的取提取小类的样本数量，这个有助于在数据上面平衡一下类别。（这个提升最大）
   2. 另外我们自己求了数据样本的均值方差以及分布情况，针对数据情况做了归一化.
   3. 我们采用了cross entropy loss和focal loss的混合，fucal loss是针对数据不平衡的样本的时候采用的。这个也对最终识别精度有一定的提升。
   4. 我们针对难以区分的类别做了单独二分类训练。以期待能有更好的精度。最终结果是二分类单独的精度比直接进行多分类要高。




针对简历一点一点复习：
1. 边缘检测步骤：
   1. 首先是对图像去噪，低频信息是变化缓慢的地方，高频信息是变化剧烈的地方对图像采用5*5的高斯和来平滑图像
   2. 计算像素梯度的幅度值和方向常用rober，sobel算子，计算水平和竖直方向的查分，梯度较大的部分边缘信息较明显。
   3.  非极大抑制，将图像边缘细化，因为可能边缘有很大一块，那么需要将非局部最大值给抑制掉，细化边缘。
   4.  双阈值抑制，大于打的阈值为强边缘，介于大的和小的就为弱边缘，更小的直接抑制
   5.  处理滞后边缘追踪，也就是说有写真边缘和假边缘的区分，边缘可以认为是连续的，那么弱边缘和强边缘是否联通来看，判断真假边缘。
   canny算子，随机森林的算法，局部检测，利用监督学习做的，缺乏一致性，pixel拓展为patch。

2. 特征点匹配（去重复，筛选，拼接，追踪）
   核心就在与计算特征向量之间的距离，常用的欧式距离，汉明距离，余弦距离1-cos（A，B），和余弦相似度cos（A，B）
   sift，orb算法
   1. sift算子，尺度不变性，位置，方向不变性
   计算特征向量之间的欧氏距离。来匹配
   2.太麻烦了应该不会问到。

3. python中生成器和迭代器的理解
   生成器（generator），作用是，比如要创建一个列表，里面的元素是有规律的，那么不需要创建包含所有元素的一个列表，占用内存，我们可以创建一个生成器，用于边输出，边计算下面的的值，有点向函数但是不用return，而是用yield。
   只有__next__方法
   迭代器（iterator）
   实现了__next__方法和__iter__方法的对象就是迭代器
4. python中的装饰器

11.2面试题目
```
Linux下编程，怎么在很多文件中寻找到你需要的文件夹，通配符的使用，grep正则表达式的用法.
通配符:用来查找文件名,正则表达式用来在文件中查找匹配字符串

```
主要有三种

* *代表匹配任意字符串
* ?匹配任意单个字符串
* [] 字符串范围
```

```
grep查找文件中包含的字符串
 * grep "被查找的字符串" 文件名
```
查看内存使用什么指令

传统图像处理中有哪些边缘检测的

Canny算法

Python生成器和迭代器，
怎么理解面向对象和结构


然后给你一个比如字符串中间带数字的图片，用一行代码去创建一个列表，得到所有的名字。

怎么理解深度学习，计算机视觉，和人工智能

遥感中怎么去平衡数据集。

focalloss的问题，小图训练大图预测，不会出问题吗，对比实验。

怎么去预测的，直接切割的话会碰到边缘明显断层怎么解决。

分割中fcn segnet unet deeplab系列的特点和发展

空洞卷积怎么操作的
有哪些缺点
计算量会变大
```
11.2日面试旷视总结：
1. 首先做一个自我介绍：
   
   回答：我叫XX，我来自湖北武汉，今年研二，本科毕业于XX大学，学的电子信息工程，后来做了一段时间手机射频相关的工作，后面读研究生，主要从事的方向是图像处理，计算机视觉方向，研一期间呢主要是上课，然后阅读计算机视觉的相关文章，然后下班学期就参与了教研室的项目。后面去石家庄实习了一段时间。

2. 传统图像算法，怎么去做边缘检测，canny算法怎么实现的。

   还是分为以下几个步骤，首先对图像进行高斯滤波，这样可以平滑图像
   其次是计算图像的梯度，然后使用非极大抑制，和双阈值抑制找到合适的边缘，其次是处理滞后边缘追踪，也就是说有写真边缘和假边缘的区分，边缘可以认为是连续的，那么弱边缘和强边缘是否联通来看，判断真假边缘。】

3. opencv插值有哪些方式。双线性插值的思想。
   主要有最近邻插值，双线性插值，三次样条插值，线性插值，区域差值。
4. linux下一些常用指令：
   1. 搜索含有关键字的文件，如何使用通配符。
   ```
   find . -name "*.txt"
   ```
   1. 查看内存使用是什么指令
   
    top和free -h指令
5. python编程相关：
   1. 怎么理解面向对象和面向结构
   面向结构，过程，就是简单的一个思路，首先得到数据之后，对数据使用一些函数一步一步去实现我们需要的功能，但是面向对象就是把任何东西对象化，数据就是对象的属性，函数就是对象的方法，这个吧数据和函数组合在一起，更好的实现我们需要的功能，比如说现在要完成一辆红色车向前行驶一百米，面向过程就是首先得到这个红色车，然后调用行驶这个函数行驶100米，但是面向对象的话我们可以去实例化这个车的对象，他有很多属性，比如红色的绿色的，还有很多中方法，比如行驶。停止等。那么我们可以掉用行驶方法，对红色车作用行驶100米。也可以完成一样的操作。


   1. python生成器和迭代器
   2. 给你一个文件夹，里面很多图片，怎么创建一个列表，一行代码实现加载所有的图片名字图片名字有index信息
6. 怎么理解计算机视觉，深度学习和人工智能。
7. 遥感项目中：
   1. 怎么平衡数据集。
   + 第一点：使用了focalloss。
   + 第二点：在制作数据集的时候，是通过随机裁剪的方式进行的，在这个过程中会控制，各个类别的裁剪数量，（通过标签判断）
   + 第三点：在训练好模型之后又针对分类不好的类别做了二分类训练。
   1. focalloss有效吗怎么，做了对比实验没有
   focalloss训练的结果整体来说精度基本没怎么提升，但是让之前分类不好的类别有明显均衡的情况。
   1. 怎么取训练和预测，预测图像比较大，视野不一样，精度对比明显吗。有没有做对比实验。
   采用的是膨胀预测，就是说一张大图进行padding，然后切割之后预测整图，只取中间的那一块作为预测对象。
   1. 切割之后预测，没有出现明显断层吗。
   膨胀预测之后这种情况不是很明显了
   1. 分割网络发展历程回顾，各个网络优缺点，结构。
   2. 空洞卷积是怎么做的。
   3. 空洞卷积有那些缺点。
   计算量大。
8.  C++中指针的翻转和

11.5日二面
开始准备，据说要手撕代码：
那么首先准备排序算法，二叉树查找。。。
另外：十道题也要搜一下。

如何理解深度学习，机器学习，人工智能，计算机视觉。

1. 人工智能是一个很宽泛的概念，主要指的是让机器能和人一样感知，思考处理问题，包括nlp，CV，机器人，逻辑和规划。这些大的方向
2. 机器学习。是实现人工只能的一种方法，主要是人机交互，让计算机通过对环境和信息中学习，自我更新自我进步。是人工智能的一个领域，是一种实现人工只能的方法，当然其本身有很多算法和方法，算法主要有决策树，贝叶斯分类，svm，em等算法，方法主要有无监督学习，监督学习，深度学习，强化学习等
3. 深度学习，是实现机器学习的技术，主要是采用神经网络的这种方式取训练达到能解决特征表达的一种学习过程。
4. 计算机视觉，主要是对图像视频相关信号的处理。主要有三大主流方向，分类分割和检测，当然近年来也有图像生成，这些主要依靠的是传统图像的一些处理方式和采用深度神经网络对图像视频进行一个处理，达到能完成任务的目的、
5. 
```
pytorch中文文档：
pytorch提供的api
常用的
首先数据相关的，
torch.ones()
torch.zeros()
torch.cat()
torch.squeeze()
torch.contiguous()将数据在内存中变为整块的，方便view()拉升
torch.unsqueeze()
torch.from_numpy()

模型保存
torch.load(路径)
torch.save(字典，路径)

层的定义：
nn.Sequential()
nn.Linear()
nn.Conv2d()
nn.BatchNorm2d()
nn.MaxPl2d()
nn.Dropout2d()
nn.ReLu()
nn.sigmoid()
nn.softmax2d()
常用的损失函数：
nn.L1Loss(size_average=True, reduce=True)
nn.MSELoss(size_average=True, reduce=True)
nn.CrossEntropyLoss(weight=None, size_average=True, ignore_index=-100, reduce=True)
nn.NLLLoss(weight=None, size_average=True, ignore_index=-100, reduce=True)
```

11.5回顾二面
主要是聊了一些项目的事情，后面询问了一些深度学习基础知识，例如sigmoid函数和relu函数的区别，还有bn层的作用。怎么理解反向传播。

11.6准备三面，第三面是老大面
预计问得问题有：
+ 怎么去协调和导师相关的事情
+ 职业规划  
+ 手撕代码（快排二叉树之类的）
+ 回头看一下图像拼接一类的算法步骤原理

